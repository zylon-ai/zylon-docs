---
title: "Airgap Installation"
description: "Install Zylon in completely offline environments"
---

import InstallationCli from "/snippets/en/installation/installation-cli.mdx";
import InstallationConfig from "/snippets/en/installation/installation-config.mdx";
import InstallationSeed from "/snippets/en/installation/installation-seed.mdx";
import InstallationSsl from "/snippets/en/installation/installation-ssl.mdx";
import InstallationMonitor from "/snippets/en/installation/installation-monitor.mdx";
import InstallationNextSteps from "/snippets/en/installation/installation-next-steps.mdx";

Airgap installation enables Zylon deployment in environments with zero internet access. This process requires **two separate Linux machines**: one with internet connectivity for downloading bundles, and one offline machine for running Zylon.

<Note>
  **Prerequisites**: Two Linux machines (Ubuntu 22/24), file transfer capability (SCP/USB/etc), and the [hardware requirements](/en/operator-manual/installation/hardware-requirements) met on the offline machine.
</Note>

---

## Installating Zylon in Airgap Environments

<Steps>
  <Step title="Online Machine">
    Download Zylon bundles and AI models with internet access
  </Step>
  <Step title="Transfer">
    Move bundle files to offline machine via secure transfer method
  </Step>
  <Step title="Offline Machine">
    Import and install Zylon without any internet connectivity
  </Step>
</Steps>

---

## Part A: Online Machine Setup

<Steps>
  <Step title="Install CLI">
    <InstallationCli />
  </Step>

  <Step title="Configure Zylon">
    Create the configuration file that will be used on both machines.

    <InstallationConfig />

    **Airgap Configuration**

    Ensure you add the airgap configuration:

    ```yaml
    airgap:
      offline_install: true
      offline_operation: true
    ```

    **Local License**

    Since the offline machine cannot reach `api.replicated.com`, you need a local license. Contact Zylon support to obtain it, then add:

    ```yaml
    license:
      email: "champion@company.com"
      id: "2xo..."
      type: "Zylon"
      data: |-
        [eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...]
    ```

    <Warning>
      Replace the `data` field with the actual license data provided by Zylon team. Please be careful with formatting and indentation.
      Just copy the token that starts with `eyJ...` and ends with `...`.
    </Warning>

    **Disable Let's Encrypt**

    Edit `/etc/zylon/zylon-conf.yaml` and **remove** these lines:

    ```yaml
    certManagerAnnotations:
      cert-manager.io/cluster-issuer: "letsencrypt-prod"
    ```

    **Disable telemetry & crash reporting**
    To disable telemetry and crash reporting, add the following section:

    ```yaml
    observability:
      crashReporting: false
      usageMetrics: false
    ```

  </Step>

  <Step title="Download Zylon Bundle">
    Download the specific Zylon version you want to install:

    ```bash
    sudo zylon-cli list-versions
    # Choose your desired version from the list
    sudo zylon-cli download <version> --airgap
    ```

    **Include AI Models (First Installation or Additional Models)**

    For your first installation or if you need additional models:
    ```bash
    sudo zylon-cli download <version> --airgap --models=model-a,model-b,model-c
    ```

    <Warning>
      **First installation or additional models require AI models!** Use the `--models` flag to specify which models to include.
      
      Check available models:
      ```bash
      sudo zylon-cli forge list
      ```
      
      Compare with your AI preset definition to determine required models.
    </Warning>
  </Step>

  <Step title="Export Bundle">
    Package the downloaded files into a transferable bundle:

    ```bash
    sudo zylon-cli export <version> --airgap
    ```

    Include models if downloaded:

    ```bash
    sudo zylon-cli export <version> --airgap --models=model-a,model-b,model-c
    ```

    This creates `zylon-<version>-airgap.tar` in your current directory. Additionally, it will generate
    the commands to run on the offline machine for installation to import and install Zylon. Store these commands safely.

    <Note>
      Export can take significant time. The resulting tar file may exceed 80GB.
    </Note>
  </Step>

  <Step title="Prepare Initial Transfer (First Install Only)">
    <Warning>
      **First installation only!** After initial setup, the CLI self-updates from airgap bundles.
    </Warning>

    Create a bundle with CLI tools and configuration:

    ```bash
    tar -czf zylon-initial.tar.gz \
      /usr/local/bin/zylon-cli \
      /usr/local/bin/zylon-forge-cli \
      /etc/zylon/zylon-conf.yaml
    ```
  </Step>

  <Step title="Transfer Files">
    Transfer files to the offline machine using your preferred method (SCP, USB, external drive):

    **First installation:**
    - `zylon-<version>-airgap.tar` (main bundle)
    - `zylon-initial.tar.gz` (CLI and config)

    **Subsequent updates:**
    - `zylon-<version>-airgap.tar` (main bundle only)

    **SCP Example**

    ```bash
    scp zylon-<version>-airgap.tar user@offline-machine:/tmp/
    scp zylon-initial.tar.gz user@offline-machine:/tmp/
    ```
  </Step>
</Steps>

---

## Part B: Offline Machine Installation

<Steps>
  <Step title="Install CLI (First Time Only)">
    <Warning>
      **Skip if updating an existing installation.** This is only for first-time installations.
    </Warning>

    Extract CLI tools and configuration:

    ```bash
    cd /tmp
    sudo tar -xzf zylon-initial.tar.gz -C /
    sudo chmod +x /usr/local/bin/zylon-cli /usr/local/bin/zylon-forge-cli
    ```

    Verify installation:

    ```bash
    sudo zylon-cli version
    cat /etc/zylon/zylon-conf.yaml
    ```

    <Note>
      Future updates automatically update the CLI from airgap bundlesâ€”no manual transfer needed.
    </Note>
  </Step>

  <Step title="Import Airgap Bundle">
    Import the Zylon bundle:

    ```bash
    cd /tmp
    sudo zylon-cli import zylon-<version>-airgap.tar
    ```

    This process:
    - Extracts all container images
    - Installs dependencies offline
    - Prepares the system for installation

    <Warning>
      Import can take 30+ minutes depending on bundle size and system performance. Do not interrupt.
    </Warning>
  </Step>

  <Step title="Install Zylon">
    Install Zylon using the imported bundle:

    ```bash
    sudo zylon-cli install <version> --airgap
    ```

    Include models if bundled:

    ```bash
    sudo zylon-cli install <version> --airgap --models=model-a,model-b,model-c
    ```

    <InstallationMonitor />
  </Step>

  <Step title="Create Organization">
    <InstallationSeed />
  </Step>

  <Step title="Configure SSL Certificates">
    <InstallationSsl />
  </Step>
  
</Steps>

---

## Updating Airgap Installations

Updates in airgap environments follow a similar two-machine workflow. The process is faster than initial installation since you're only transferring changes, not the entire platform.

<Note>
  **Estimated Time**: 45-60 minutes total (15-20 min online machine, 25-40 min offline machine)
</Note>

<Steps>
  <Step title="On Online Machine: Download Update">
    Download the new Zylon version bundle:

    ```bash
    sudo zylon-cli download <new-version> --airgap
    ```

    **Adding New AI Models**
    
    If you need to add models not previously installed, include them:
    
    ```bash
    sudo zylon-cli download <new-version> --airgap --models=new-model-a,new-model-b
    ```

    <Info>
      Check your current models and available ones:
      ```bash
      sudo zylon-cli forge list
      ```
      Compare with your AI preset requirements to determine if additional models are needed.
    </Info>
  </Step>

  <Step title="On Online Machine: Create Update Bundle">
    Export an incremental update bundle:

    ```bash
    sudo zylon-cli export <new-version> --from <current-version> --airgap
    ```

    The `--from` flag creates a differential bundle containing only changes between versions, significantly reducing bundle size and transfer time.

    **Include models (if applicable):**

    If you change the preset, the GPU requirements, or need new models, include them:
    
    ```bash
    sudo zylon-cli export <new-version> --from <current-version> --airgap --models=new-model-a,new-model-b
    ```

    This generates `zylon-<new-version>-airgap.tar` and displays the import/install commands to run on the offline machine as well.

    <Note>
      Differential bundles are typically 5-20 GB vs. 80+ GB for full bundles.
    </Note>
  </Step>

  <Step title="Transfer Bundle to Offline Machine">
    Transfer the bundle file using your secure method:

    **SCP Example:**
    ```bash
    scp zylon-<new-version>-airgap.tar user@offline-machine:/tmp/
    ```

    **Alternative methods:**
    - USB drive
    - Internal file transfer system
    - Network share (if available)
  </Step>

  <Step title="On Offline Machine: Import Update">
    Import the update bundle:

    ```bash
    cd /tmp
    sudo zylon-cli import zylon-<new-version>-airgap.tar
    ```

    The import process:
    - Extracts container images for the new version
    - Updates system dependencies
    - Prepares upgrade artifacts

    <Warning>
      This may take 10-30 minutes. Don't interrupt the process.
    </Warning>
  </Step>

  <Step title="On Offline Machine: Apply Update">
    Apply the update to your running Zylon instance:

    ```bash
    sudo zylon-cli install <new-version> --airgap
    ```

    **If you included new models:**
    
    ```bash
    sudo zylon-cli install <new-version> --airgap --models=new-model-a,new-model-b
    ```
  </Step>
</Steps>

---

<InstallationNextSteps />
