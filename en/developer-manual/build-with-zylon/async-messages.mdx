---
title: "Async messages"
description: "Start a Messages request asynchronously, then stream events or poll status by message_id."
---

Async messages let you kick off a generation and then observe it later. This is useful when you can’t keep a single HTTP request open (for example, background jobs or unstable client connections).

## Prerequisites

- An API token. See [Token Management](/en/api-reference/token-management).
- Your Zylon hostname (replace `{base_url}` in the examples).

## Quickstart

### 1) Start an async message

```bash
curl -X POST "https://{base_url}/gpt/v1/messages/async" \
  -H "Authorization: Bearer {api_token}" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "default",
    "max_tokens": 32,
    "messages": [
      { "role": "user", "content": "Say only: async ok" }
    ]
  }'
```

Example response:

```json
{
  "message_id": "1cc8ed5e-fc7a-45e1-baf4-0b916ed32290",
  "status": "pending",
  "message": "Request initiated successfully"
}
```

### 2) Stream events (SSE)

Use the `message_id` from the previous step:

```bash
curl -N "https://{base_url}/gpt/v1/messages/async/{message_id}/stream" \
  -H "Authorization: Bearer {api_token}" \
  -H "Accept: text/event-stream"
```

Example streamed events (truncated):

```text
event: message_start
data: {"type":"message_start","message":{"id":"msg_4b5a3cd9158b41278e0cc5f8263ece39","type":"message","role":"assistant","content":[],"model":"private-gpt","usage":{}}}

event: ping
data: {"type":"ping"}

event: error
data: {"type": "error", "error": {"type": "api_error", "message": "Api Error"}, "exception": {"type": "RuntimeError", "message": "<AioRpcError of RPC that terminated with:\n\tstatus = StatusCode.UNAVAILABLE\n\tdetails = \"failed to connect to all addresses; last error: UNKNOWN: ipv4:107.22.191.42:443: Failed to connect to remote host: Timeout occurred: FD Shutdown\"\n\tdebug_error_string = \"UNKNOWN:Error received from peer  {grpc_message:\"failed to connect to all addresses; last error: UNKNOWN: ipv4:107.22.191.42:443: Failed to connect to remote host: Timeout occurred: FD Shutdown\", grpc_status:14, created_time:\"2026-02-08T13:35:09.534948595+00:00\"}\"\n>"}}

event: message_stop
data: {"type":"message_stop"}
```

## Polling status (optional)

If you don’t want to consume the stream, you can poll status:

```bash
curl "https://{base_url}/gpt/v1/messages/async/{message_id}/status" \
  -H "Authorization: Bearer {api_token}"
```

Example response:

```json
{
  "message_id": "1cc8ed5e-fc7a-45e1-baf4-0b916ed32290",
  "status": "completed",
  "created_at": "2026-02-08T13:31:55.692228Z",
  "updated_at": "2026-02-08T13:32:16.267793Z",
  "completed_at": "2026-02-08T13:32:16.267793Z",
  "error_message": "",
  "stream_type": "chat_completion",
  "metadata": {
    "message_count": 1,
    "tools_enabled": false,
    "thinking_enabled": false,
    "citations_enabled": false
  }
}
```

## Cancel and delete

The following endpoints let you manage async runs (no request body required):

- `POST /messages/async/{message_id}/cancel`
- `DELETE /messages/async/{message_id}/delete`

## Common mistakes

- **Using the wrong ID**: the SSE `message_start` event includes the assistant message `id`, but the async endpoints use the `message_id` returned by `POST /messages/async`.
- **Forgetting the SSE header**: set `Accept: text/event-stream` on `.../stream`.
- **Deleting too early**: once deleted, status/stream endpoints return `404`.

## Next steps

- Learn the Messages request format: [Working with messages](/en/developer-manual/build-with-zylon/working-with-messages)
