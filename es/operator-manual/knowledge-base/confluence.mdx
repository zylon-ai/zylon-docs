---
title: Confluence
---

Para integrar con Confluence, necesitas **crear una aplicaci√≥n de Atlassian** que actuar√° como un puente entre Zylon ‚Üî Confluence y **configurar Zylon** para usar la nueva aplicaci√≥n de Atlassian

## Crear una aplicaci√≥n de Atlassian

Primero necesitas una cuenta de Atlassian que ser√° la propietaria de la aplicaci√≥n. Recomendamos usar una cuenta no personal. Esta cuenta no necesita tener acceso a ning√∫n Space ya que servir√° como un puente entre Zylon y Confluence.

1. Ve a [https://developer.atlassian.com/console/myapps/](https://developer.atlassian.com/console/myapps/)

    Haz clic en `Create` ‚Üí `OAuth 2.0 integration`


![image.png](/images/operator-manual/knowledge-base/confluence-images/image.png)

1. Proporciona un nombre significativo para la Aplicaci√≥n.

![image.png](/images/operator-manual/knowledge-base/confluence-images/image%201.png)

1. En distribuci√≥n:
    - En el men√∫ izquierdo navega a `Distribution`
    - Haz clic en `Edit`

![image.png](/images/operator-manual/knowledge-base/confluence-images/image%202.png)

1. En estado de distribuci√≥n:
- Selecciona la casilla `Sharing`.
- Ingresa un nombre de proveedor o elige la opci√≥n `Use your own name`.
- Si tienes una pol√≠tica de privacidad, proporciona el enlace a ella. Si no, usa el enlace por defecto: [`https://example.com/privacy`](https://example.com/privacy), que est√° destinado para uso interno.
- Para la pregunta "¬øTu aplicaci√≥n almacena datos personales?", selecciona `No`

![image.png](/images/operator-manual/knowledge-base/confluence-images/image%203.png)

1.  En permisos:
- En el men√∫ izquierdo, navega a **`Permissions`**.
- Haz clic en **`Add`** para **`Confluence API`**.
- La p√°gina se actualiza autom√°ticamente, y deber√≠a aparecer un nuevo bot√≥n **`Configure`**. Si no aparece, actualiza la p√°gina manualmente.
- Haz clic en **`Configure`**.

![image.png](/images/operator-manual/knowledge-base/confluence-images/image%204.png)

![image.png](/images/operator-manual/knowledge-base/confluence-images/image%205.png)

1. Haz clic en `Granual scopes` y luego en `Edit scopes`

![image.png](/images/operator-manual/knowledge-base/confluence-images/image%206.png)

1. Agrega uno por uno los siguientes permisos. Puedes buscarlos pegando los valores en el campo con una lupa.

    Debe haber un total de `10` scopes agregados que puedes revisar antes de guardar.


```bash
        read:content:confluence,
        read:content-details:confluence,
        read:space-details:confluence,
        read:page:confluence,
        read:attachment:confluence,
        read:blogpost:confluence,
        read:custom-content:confluence,
        read:space:confluence,
        read:space.permission:confluence,
        read:folder:confluence,

```

![image.png](/images/operator-manual/knowledge-base/confluence-images/image%207.png)

![image.png](/images/operator-manual/knowledge-base/confluence-images/image%208.png)

1. En autorizaci√≥n:
- En el men√∫ izquierdo, navega a **`Authorization`**.
- Haz clic en **`Add`** para **`OAuth 2.0 (3LO)`**.

![image.png](/images/operator-manual/knowledge-base/confluence-images/image%209.png)

1. En autorizaci√≥n:
- En el campo **`Callback URL`**, ingresa:
`https://zylon.company.com/api/app/integration/confluence/callback`Reemplaza **`zylon.company.com`** con el hostname donde est√° instalado Zylon en tu servidor.
- Haz clic en **`Save changes`**.

![image.png](/images/operator-manual/knowledge-base/confluence-images/image%2010.png)

1. En configuraci√≥n:
- En el men√∫ izquierdo, navega a `Settings`. Copia los dos valores listados bajo **`Authentication details`**:
    - Client ID
    - Secret

Necesitar√°s estos valores para el siguiente paso: [Configurar Zylon para usar la Aplicaci√≥n de Atlassian](#configure-zylon-to-use-atlassian-application)

![image.png](/images/operator-manual/knowledge-base/confluence-images/image%2011.png)

## Configurar Zylon para usar la Aplicaci√≥n de Atlassian

Con los valores que hemos adquirido en el paso 10, necesitas editar el archivo de configuraci√≥n de Zylon ubicado en `/etc/zylon/zylon-conf.yaml`

<Tip>
    El archivo de configuraci√≥n es un archivo `.yaml` ¬°ten cuidado con la sangr√≠a, espacios, punto y coma, comillas dobles!
</Tip>

Agrega el siguiente fragmento al final del archivo

```bash
integration:
  confluence:
    enabled: true
    clientId: ""
    clientSecret: ""
    redirectUri: ""  

```

Y completa las propiedades con los valores generados previamente:

- clientId ‚Üí valor generado en el paso 10
- clientSecret ‚Üí valor generado en el paso 10
- redirectUri ‚Üí mismo valor que en el paso 9

Guarda y cierra el archivo `/etc/zylon/zylon-conf.yaml`

Finalmente, ejecuta el siguiente comando para reiniciar Zylon y actualizar la configuraci√≥n

```bash
zylon-cli update
```

¬°Todo est√° listo üéâ

## Soluci√≥n de Problemas

### Intento cargar archivos a la base de conocimiento y el bot√≥n de Confluence est√° deshabilitado

Limpia la cach√© del navegador e intenta de nuevo.

### Cuando hago clic en `Upload files -> From Confluence` el inicio de sesi√≥n no funciona

- Verifica que el `clientId` `secretId` est√©n copiados y pegados correctamente en el archivo de configuraci√≥n de Zylon
- Verifica que la `Callback URL` sea correcta en el paso 9 y sea la misma que el `redirectUri` en el archivo de configuraci√≥n.

### No veo ning√∫n espacio para importar

- Aseg√∫rate de haber iniciado sesi√≥n en Confluence con una cuenta que tenga acceso a espacios.
- Verifica que los permisos requeridos sean correctos como se muestra en el paso 6
