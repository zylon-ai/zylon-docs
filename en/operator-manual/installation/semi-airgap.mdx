---
title: "Semi-Airgap Installation"
description: "Install Zylon in environments with restricted internet access"
---

import InstallationCli from "/snippets/en/installation/installation-cli.mdx";
import InstallationConfig from "/snippets/en/installation/installation-config.mdx";
import InstallationSeed from "/snippets/en/installation/installation-seed.mdx";
import InstallationSsl from "/snippets/en/installation/installation-ssl.mdx";
import InstallationMonitor from "/snippets/en/installation/installation-monitor.mdx";
import InstallationNextSteps from "/snippets/en/installation/installation-next-steps.mdx";

This guide covers Zylon installation for environments with limited internet access due to firewall restrictions or proxy requirements. The system requires one-time internet connectivity during installation and updates.

<Note>
  **Prerequisites**: Linux machine with restricted internet, firewall access to specific domains, root access, and a domain name. See [hardware requirements](/en/operator-manual/installation/hardware-requirements).
</Note>

---

## Required Network Access

Your firewall must allow access to these domains:

**Essential Services:**
- `get.zylon.ai` - CLI installation
- `zylon-cli.s3.us-east-1.amazonaws.com` - CLI binaries and dependencies
- `zylon-artifacts.s3.us-east-1.amazonaws.com` - Zylon installation files and updates

**Container Registries:**
- `quay.io` - Third-party container images
- `ghcr.io` - GitHub container registry
- `docker.io` - Docker Hub images
- `registry.k8s.io` - Kubernetes images
- `reg.kyverno.io` - Kyverno policy engine
- `nvcr.io` - NVIDIA Container Registry

**AI Models & Dependencies:**
- `huggingface.co` - AI model repository
- `xet.huggingface.co` - Hugging Face XET protocol

**System Dependencies:**
- `nvidia.com` - NVIDIA driver packages
- `developer.download.nvidia.com` - NVIDIA CUDA toolkit
- `get.k0s.sh` - Kubernetes distribution installer
- `raw.githubusercontent.com` - GitHub raw content
- `github.com` - GitHub repositories
- `*.github.io` - GitHub Pages (various Helm charts)
- `openebs.github.io` - OpenEBS storage Helm charts
- `stakater.github.io` - Stakater Helm charts
- `kyverno.github.io` - Kyverno Helm charts

**Optional (License-Related):**
- `replicated.app` - Zylon distribution platform
- `api.replicated.com` - License validation
- `proxy.replicated.com` - Zylon container images

**Optional (Configuration-Dependent):**
- `openaipublic.blob.core.windows.net` - Required only for gpt-oss configuration

<Tip>
  Work with your network team to whitelist these domains before starting installation.
</Tip>

---

## Installating Zylon in Semi-Airgap Environments

<Steps>
  <Step title="Install Zylon CLI">
    <InstallationCli />
  </Step>

  <Step title="Configure Zylon">
    <InstallationConfig />

    **Local License (If Needed)**

    If `api.replicated.com` is blocked during operation, you need a local license. Contact Zylon support to obtain it, then add:

    ```yaml
    license:
      email: "champion@company.com"
      id: "2xo..."
      type: "Zylon"
      data: |-
        [eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...]
    ```

    <Warning>
      Replace the `data` field with the actual license data provided by Zylon team. Please be careful with formatting and indentation.
      Just copy the token that starts with `eyJ...` and ends with `...`.
    </Warning>

    **For proxy configuration**, see the [Proxy Configuration Guide](/en/operator-manual/configuration/network/proxy).

    **Disable Let's Encrypt**

    Edit `/etc/zylon/zylon-conf.yaml` and **remove** these lines:

    ```yaml
    certManagerAnnotations:
      cert-manager.io/cluster-issuer: "letsencrypt-prod"
    ```

  </Step>

  <Step title="Install Zylon">
    Run the installation with your desired version:

    ```bash
    sudo zylon-cli list-versions
    # Choose your desired version from the list
    sudo zylon-cli install <version>
    ```

    <InstallationMonitor />

    Installation may take 15-60 minutes depending on network speed and firewall restrictions.
  </Step>

  <Step title="Create Organization">
    <InstallationSeed />
  </Step>

  <Step title="Configure Offline Operation">
    After validate that Zylon is running correctly, you can enable offline operation. This will configure Zylon to work without internet access.
    Edit `/etc/zylon/zylon-conf.yaml` and add:
    ```yaml
    airgap:
      offline_operation: true
    ```

    This will disable connectivity in AI, K8s and other subsystems.
  </Step>

  <Step title="Configure SSL (Optional)">
    For VPN or private network deployments, you need to manually install SSL certificates.

    <InstallationSsl />
  </Step>
</Steps>

---

## Updating Semi-Airgap Installations

To update the instance, we will need to remove network restrictions temporarily on a connected machine to download update packages. Contact your network security team to whitelist the required domains during this process.
After downloading, you can reapply the restrictions.

Before to update, be sure to disable offline mode by editing `/etc/zylon/zylon-conf.yaml` and setting:

```yaml
airgap:
  offline_operation: false
```

Then, run the install command with the new version:

```bash
sudo zylon-cli list-versions
# Choose your desired version from the list
sudo zylon-cli install <new-version>
```

Or upgrade directly to the latest version using the upgrade command:

```bash
sudo zylon-cli upgrade
```

When the process is complete, re-enable offline mode by setting:

```yaml
airgap:
  offline_operation: true
```

---

<InstallationNextSteps />