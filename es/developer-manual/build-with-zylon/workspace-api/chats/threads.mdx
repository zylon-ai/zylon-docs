---
title: "Chats"
description: "Hilos, interacciones y chat de una sola llamada."
---

Los chats en la Workspace API se organizan alrededor de **hilos** e **interacciones**:

{/* <!-- RESTRUCTURED --> */}
| Concepto | Significado |
| --- | --- |
| **Thread** | Contenedor de conversación dentro de un proyecto. |
| **Interaction** | Interacción individual dentro del hilo. |
| **Chat** | Solicitud de una sola llamada que **no** crea un hilo. |

Usa hilos cuando necesitas historial y seguimiento. Usa interacciones para enviar un nuevo turno a un hilo. Usa el endpoint de chat para solicitudes de un solo turno.

## Solicitud básica y respuesta

Crea una interacción en un hilo con `POST /v1/app/thread/{threadId}/interaction`.

```bash
curl -X POST "https://{BASE_URL}/v1/app/thread/thread_3f2a1c4d5b6e7f8a/interaction" \
  -H "Authorization: Bearer {API_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "thread_id": "thread_3f2a1c4d5b6e7f8a",
    "artifact_ids": ["artifact_2b4d6f8a1c3e5a7b"],
    "all_artifacts": false,
    "agent": "Default",
    "pgpt": {
      "messages": [
        {
          "role": "user",
          "content": [
            { "type": "text", "text": "Summarize the artifact in three bullets." }
          ]
        }
      ],
      "max_tokens": 120,
      "temperature": 0.2
    }
  }'
```

{/* <!-- RESTRUCTURED --> */}
<Accordion title="Ejemplo de respuesta (InteractionDTO)">
```json
{
  "id": "inter_5a7b9c1d3e5f7a9b",
  "project_id": "proj_7a5c3e1b9d2f4a6c",
  "thread_id": "thread_3f2a1c4d5b6e7f8a",
  "state": "Completed",
  "artifact_ids": ["artifact_2b4d6f8a1c3e5a7b"],
  "all_artifacts": false,
  "user_input": {
    "role": "user",
    "content": [
      { "type": "text", "text": "Summarize the artifact in three bullets." }
    ]
  },
  "assistant_output": {
    "id": "msg_3d2c1b4a5f6e7d8c",
    "created": 1739036500,
    "model": "default",
    "stop_reason": "end_turn",
    "content": [
      { "type": "text", "text": "• Ticket volume rose 12% week-over-week\n• Billing issues drove 38% of cases\n• Priority bugs were resolved within 48 hours" }
    ],
    "usage": { "input_tokens": 180, "output_tokens": 52 }
  },
  "created_at": "2026-02-08T14:41:10Z"
}
```
</Accordion>

## Crear o listar hilos

Crear un hilo en un proyecto:

```bash
curl -X POST "https://{BASE_URL}/v1/app/project/proj_7a5c3e1b9d2f4a6c/thread" \
  -H "Authorization: Bearer {API_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Weekly Support Brief",
    "visibility": "Private"
  }'
```

Listar hilos:

```bash
curl "https://{BASE_URL}/v1/app/project/proj_7a5c3e1b9d2f4a6c/thread?page=1&page_size=20" \
  -H "Authorization: Bearer {API_TOKEN}"
```

{/* <!-- RESTRUCTURED --> */}
<Accordion title="Ejemplo de respuesta">
```json
{
  "data": [
    {
      "id": "thread_3f2a1c4d5b6e7f8a",
      "name": "Weekly Support Brief",
      "visibility": "Private",
      "created_at": "2026-02-08T14:40:00Z"
    }
  ],
  "has_next_page": false,
  "has_previous_page": false,
  "total_count": 1
}
```
</Accordion>

## Actualizar o eliminar un hilo

```bash
curl -X PUT "https://{BASE_URL}/v1/app/thread/thread_3f2a1c4d5b6e7f8a" \
  -H "Authorization: Bearer {API_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Weekly Support Brief",
    "visibility": "Private"
  }'
```

Eliminar un hilo:

```bash
curl -X DELETE "https://{BASE_URL}/v1/app/thread/thread_3f2a1c4d5b6e7f8a" \
  -H "Authorization: Bearer {API_TOKEN}"
```

## Listar u obtener interacciones

Listar interacciones de un hilo:

```bash
curl "https://{BASE_URL}/v1/app/thread/thread_3f2a1c4d5b6e7f8a/interaction?page=1&page_size=20" \
  -H "Authorization: Bearer {API_TOKEN}"
```

Obtener una interacción:

```bash
curl "https://{BASE_URL}/v1/app/interaction/inter_5a7b9c1d3e5f7a9b" \
  -H "Authorization: Bearer {API_TOKEN}"
```

## Cancelar, eliminar o hacer streaming de una interacción

Cancelar una interacción:

```bash
curl -X POST "https://{BASE_URL}/v1/app/interaction/inter_5a7b9c1d3e5f7a9b/cancel" \
  -H "Authorization: Bearer {API_TOKEN}"
```

Eliminar una interacción:

```bash
curl -X DELETE "https://{BASE_URL}/v1/app/interaction/inter_5a7b9c1d3e5f7a9b" \
  -H "Authorization: Bearer {API_TOKEN}"
```

Streaming:

```bash
curl -N "https://{BASE_URL}/v1/app/interaction/inter_5a7b9c1d3e5f7a9b/stream" \
  -H "Authorization: Bearer {API_TOKEN}" \
  -H "Accept: text/event-stream"
```

{/* <!-- RESTRUCTURED --> */}
<Accordion title="Ejemplo de stream">
```text
event: message_start
data: {"type":"message_start","message":{"id":"msg_3d2c1b4a5f6e7d8c","role":"assistant","content":[]}}

event: content_block_delta
data: {"type":"content_block_delta","delta":{"type":"text_delta","text":"• Ticket volume rose 12%"}}

event: message_stop
data: {"type":"message_stop"}
```
</Accordion>

## Chat de una sola llamada

Si no necesitas un hilo, usa el endpoint de chat:

```bash
curl -X POST "https://{BASE_URL}/v1/app/chat" \
  -H "Authorization: Bearer {API_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [
      {
        "role": "user",
        "content": [
          { "type": "text", "text": "Draft a 2-sentence update on this week’s support backlog." }
        ]
      }
    ],
    "max_tokens": 64,
    "temperature": 0.3
  }'
```

{/* <!-- RESTRUCTURED --> */}
<Accordion title="Ejemplo de respuesta">
```json
{
  "id": "msg_5f2e1d3c4b6a7c8d",
  "role": "assistant",
  "content": [
    { "type": "text", "text": "Backlog volume dipped 8% this week after closing high-priority billing cases. We’ll focus next on resolving long-tail authentication issues." }
  ]
}
```
</Accordion>

## Validar una solicitud de chat

```bash
curl -X POST "https://{BASE_URL}/v1/app/chat/validate" \
  -H "Authorization: Bearer {API_TOKEN}" \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [
      {
        "role": "user",
        "content": [
          { "type": "text", "text": "Give me a three-bullet summary of the Q1 support plan." }
        ]
      }
    ],
    "max_tokens": 64,
    "temperature": 0.3
  }'
```

## Errores y casos límite

- **400**: esquema inválido (usa `/chat/validate`).
- **404**: hilo o interacción no encontrada.
- **409**: interacción ya completada al cancelar.
