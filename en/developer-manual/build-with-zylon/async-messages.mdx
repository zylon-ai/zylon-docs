---
title: "Async messages"
description: "Start a Messages request asynchronously, then stream events or poll status by message_id."
---

Async messages let you kick off a generation and then observe it later. This is useful when you can’t keep a single HTTP request open (for example, background jobs or unstable client connections).

## Prerequisites

```bash
export API_TOKEN="YOUR_API_TOKEN"
```

## Quickstart

### 1) Start an async message

```bash
curl -X POST "https://{base_url}/gpt/v1/messages/async" \
  -H "Authorization: Bearer $API_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "default",
    "max_tokens": 32,
    "messages": [
      { "role": "user", "content": "Say only: async ok" }
    ]
  }'
```

Example response:

```json
{
  "message_id": "93e8050c-7d9c-470c-829b-252a3ee9e82b",
  "status": "pending",
  "message": "Request initiated successfully"
}
```

### 2) Stream events (SSE)

Use the `message_id` from the previous step:

```bash
MESSAGE_ID="YOUR_MESSAGE_ID"
```

```bash
curl -N "https://{base_url}/gpt/v1/messages/async/$MESSAGE_ID/stream" \
  -H "Authorization: Bearer $API_TOKEN" \
  -H "Accept: text/event-stream"
```

Example streamed events (truncated):

```text
event: message_start
data: {"type":"message_start","message":{"id":"msg_97be8a330c0c4d22a2b65c27e108109f","type":"message","role":"assistant","content":[],"model":"private-gpt","usage":{}}}

event: content_block_delta
data: {"type":"content_block_delta","index":0,"block_id":"block_019c2f10b8d379f38e6038860485e849","delta":{"type":"text_delta","text":"async"}}

event: message_stop
data: {"type":"message_stop"}
```

## Polling status (optional)

If you don’t want to consume the stream, you can poll status:

```bash
curl "https://{base_url}/gpt/v1/messages/async/$MESSAGE_ID/status" \
  -H "Authorization: Bearer $API_TOKEN"
```

Example response:

```json
{
  "message_id": "93e8050c-7d9c-470c-829b-252a3ee9e82b",
  "status": "completed",
  "created_at": "2026-02-05T18:29:10.365169Z",
  "updated_at": "2026-02-05T18:29:11.107558Z",
  "completed_at": "2026-02-05T18:29:11.107558Z",
  "error_message": "",
  "stream_type": "chat_completion",
  "metadata": {
    "message_count": 1,
    "tools_enabled": false,
    "thinking_enabled": false,
    "citations_enabled": false
  }
}
```

## Cancel and delete

### Cancel a stream

```bash
curl -X POST "https://{base_url}/gpt/v1/messages/async/$MESSAGE_ID/cancel" \
  -H "Authorization: Bearer $API_TOKEN" \
  -H "Content-Type: application/json"
```

Example response:

```json
{
  "message": "Stream cancelled successfully",
  "message_id": "93e8050c-7d9c-470c-829b-252a3ee9e82b"
}
```

### Delete a stream

```bash
curl -i -X DELETE "https://{base_url}/gpt/v1/messages/async/$MESSAGE_ID/delete" \
  -H "Authorization: Bearer $API_TOKEN"
```

Example response (truncated):

```text
HTTP/2 200

null
```

## Common mistakes

- **Using the wrong ID**: the SSE `message_start` event includes the assistant message `id`, but the async endpoints use the `message_id` returned by `POST /messages/async`.
- **Forgetting the SSE header**: set `Accept: text/event-stream` on `.../stream`.
- **Deleting too early**: once deleted, status/stream endpoints return `404`.

## Next steps

- Learn the Messages request format: [Working with messages](/en/developer-manual/build-with-zylon/working-with-messages)
